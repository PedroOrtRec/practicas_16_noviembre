<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio4</title>
</head>

<body>

    <!--
EJERCICIO 4. (CONDICION: REUTILIZAR FUNCIONALIDAD Y
ENCAPSULAR CADA ACCIÓN EN UN FUNCIÓN)
Realizar un programa con un listado de productos.
Para la realización de este programa tendré que crear un array que tenga productos
con los siguientes datos.
name es un string
price es un number
stock es un Boolean
category es un string y hay 5 categories posibles ‘lacteos’, ‘carnes’, ‘frutas’, ‘verduras’,
‘pescados’.
1- Realizar un array con 10 productos de diferentes datos con diferentes categorías.
2 - Filtrar productos que estén entre 1 y 3 euros (ojo capacidad de abstracción).
3 - Filtrar por categoria
4 - filtrar por disposición de stock
5 - filtrar productos entre 1 y 3 euros que tengan stock.
    -->

    <script>

        //ARRAY

        const productos = new Array(
            {
                name: 'Tomate',
                price: 1.5,
                stock: true,
                category: 'verduras',
            },
            {
                name: 'Pimiento',
                price: 0.7,
                stock: true,
                category: 'verduras',
            },
            {
                name: 'Sardina',
                price: 1.7,
                stock: false,
                category: 'pescado',
            },
            {
                name: 'Platano',
                price: 2.7,
                stock: false,
                category: 'frutas',
            },
            {
                name: 'Piña',
                price: 3.5,
                stock: true,
                category: 'frutas',
            },
            {
                name: 'Naranja',
                price: 0.9,
                stock: false,
                category: 'frutas',
            },
            {
                name: 'Mozarella',
                price: 4,
                stock: false,
                category: 'Lacteos',
            },
            {
                name: 'LecheDesnatada',
                price: 2.5,
                stock: true,
                category: 'Lacteos',
            },
            {
                name: 'JamonYork',
                price: 0.5,
                stock: false,
                category: 'Carnes',
            },
            {
                name: 'JamonSerrano',
                price: 5,
                stock: true,
                category: 'Carnes',
            },
        )

        //DECLARACIÓN DE FUNCIONES

        function filtrarPrecios(pLista, pPrecio1, pPrecio2) {
            return filtroPrecio = pLista.filter(producto => producto.price <= pPrecio2 && producto.price >= pPrecio1);
        }

        function filtrarStock(pLista, pStock) {
            return filtroStock = pLista.filter(producto => producto.stock == pStock);
        }

        function filtrarCategoria(pLista, pCategoria) {
            return filtroCategoria = pLista.filter(producto => producto.category == pCategoria)
        }

        function dobleFiltrar(pLista, pStock, pPrecio1, pPrecio2) {
            let doblefiltro = filtrarStock(pLista, pStock);
            return doblefiltro = filtrarPrecios(doblefiltro, pPrecio1, pPrecio2);
        }

        //FUNCIÓN REUTILIZABLE

        function filtrar(pLista, pFiltro) {
            if (typeof pFiltro === 'boolean') {
                return filtroStock = pLista.filter(producto => producto.stock == pFiltro);
            } else if (typeof pFiltro === 'string') {
                return filtroCategoria = pLista.filter(producto => producto.category == pFiltro)
            }
        }

        //COMPROBACIÓN

        console.log(filtrarPrecios(productos, 1, 3));
        console.log(filtrarStock(productos, true));
        console.log(filtrarCategoria(productos, 'Carnes'));
        console.log(dobleFiltrar(productos, true, 1, 3));

        //--

        console.log(filtrar(productos, false));
        console.log(filtrar(productos, 'Lacteos'));


    </script>

</body>

</html>